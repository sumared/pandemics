---
title: "Analysis of Some Aspects of Gameplay of *Pandemic*"
author: |
        | Marcelo Ventura Freire
        | Tiago Tomazi
date: "`r format(Sys.time(), '%Y-%b-%d')`"
output: 
  html_document:
    toc: true
    toc_depth: 2
    number_sections: true
    smart: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(magrittr)
library(tidyverse)
library(tidygraph)
library(ggrepel)
library(ggraph)
```

# Introducion 

## The Game *Pandemic*

## Basic Gameplay, its 7 variants, and its 5 expansions

### How to make a competition out of a cooperative game

### *Pandemic Survival*

## Concepts

### Cooperative Game

### Cities and the Map

### Deseases and Cures

### Infections, Epidemies, and Outbreaks

### Movement and Spacial Actions

### Specialist Characters

## Game Dynamics

### Desease Spread in the Map

### Infection Deck and Players' Deck

### Turn Structure

### Game Progress Indicators

# Graph Theory's Aspects

## Nodes and Edges

```{r read.graph}
nodes <- 
  read.csv("nodes.csv", strip.white = T, stringsAsFactors = F) %>%
  mutate(
    id = 1:n(), 
    contagion = 0
  )
adjacency <- 
  read.csv("adjacency.csv", header = F) %>% 
  as.matrix() %>%
  set_colnames(nodes$name) %>%
  set_rownames(nodes$name)
world <- 
  as_tbl_graph(adjacency, directed = F) %>%
  activate(nodes) %>%
  left_join(nodes, by = "name") 
world
```

```{r plot.graph}
plot.graph <- 
  function(layout, ...) {
    ggraph(world, layout = layout, ...) +
      geom_node_label(aes(label = name)) + 
      geom_edge_link() +
      ggtitle(layout) +
      theme_void()
  }
plot.graph("nicely")
plot.graph("mds")
plot.graph("sphere")
plot.graph("kk")
plot.graph("drl")
plot.graph("lgl")
plot.graph("circle")
plot.graph("linear", circular = T)
```

## Adjacency Matrix to the cities

```{r adjacency}
print(adjacency)
```

## Distance Matrix between the cities

```{r distance}
A <- diag(diag(adjacency)^0)
B <- `dimnames<-`(adjacency, NULL)
distances <- adjacencies <- list()
k <- 0
while (any(A==0)) {
  k <- k + 1
  A <- A %*% B 
  adjacencies[[k]] <- A
  distances[[k]] <- k / (A > 0)
}
distance <- 
  do.call(pmin, distances) %>%
  `diag<-`(0) %>%
  set_colnames(nodes$name) %>%
  set_rownames(nodes$name)
print(distance)
```

## Where to build centers

```{r build.centers}
centers <- c("Atlanta")

```


# Probability and Decision Theories' Aspects

## Basic Gameplay *versus* Championship

## Basic Gameplay: Restricted Shuffling 

## Championship: Partial Deck Building and Restricted Shuffling 



